# LC103 v1.53 Auto-Calibration Deep Re-Evaluation (2026-02-24)

## Scope
Second-pass static analysis focused on hidden calibration command handling in:
- `half1.bin` (bank1)
- Decompiled artifacts around `0x57e8..0x5d29`, `0xd200`, `0xd25a`
- RS-232 parser/control routines around `0x2713..0x2a0a`
- Public LC103 RS-232 manual command table for cross-check

## What Was Re-Verified

1. Hidden calibration command strings exist in firmware image:
- `CALON`, `CALOFF`, `CALSET`, `CALCLR`, `CALF`, `CALF?`, `CALCHK`, `CALDATE`, `CALDATE?`
- Plus service-adjacent strings: `SER#`, `SER#?`, `BEEP`, `GAIN`, `ISRC`

2. Public manual command table does NOT include `CAL*` commands.
- This strongly supports `CAL*` being factory/service-only.

3. RS-232 parser behavior is consistent with command automation:
- Uppercases input (`FUN_CODE_50ce`)
- Uses CR/LF plus `,`/`;` delimiters
- Implements XON/XOFF handling (`0x11`/`0x13` paths)
- Emits `INVALID RS232 COMMAND` on failures

4. Calibration handler cluster is internally coherent and reachable by a short internal chain:
- `FUN_CODE_5bc0 -> FUN_CODE_5b12 -> FUN_CODE_5b53 -> (FUN_CODE_57e8 | FUN_CODE_5b8b)`
- `FUN_CODE_57e8` and `FUN_CODE_5b8b` set/commit calibration mode variable `DAT_EXTMEM_8a46`
- `FUN_CODE_5c00` and `FUN_CODE_5d29` implement heavy numeric/state calibration workflows keyed off `DAT_EXTMEM_8a46`
- `FUN_CODE_d200` / `FUN_CODE_d25a` appear to perform deep calibration math/state updates and finalization checks

## Important Gap (Still Present)
Direct code xrefs from the `CAL*` strings to their dispatch site are not recovered by current analysis artifacts.
Likely causes:
- table-driven or computed dispatch,
- code/data classification gaps in analyzed regions,
- indirect jump/call paths.

So: handler internals are strong, but exact top-level command-to-handler binding is still partly inferred.

## Updated Inference: Command Semantics

Most plausible interpretation from control flow and strings:
- `CALON` / `CALOFF`: enter/leave calibration mode
- `CALCLR`: clear calibration working state
- `CALSET`: set/select calibration target context (likely fixture/range slot)
- `CALF` and `CALF?`: calibration factor write/query path
- `CALCHK`: calibration status check
- `CALDATE` and `CALDATE?`: calibration date write/query

## Best-Guess Safe Sequence (Revised)

1. `CALON\r`
2. `CALCLR\r`
3. `CALSET,...\r` (target/slot arguments likely required)
4. `CALF,...\r` (factor/value arguments likely required)
5. repeat `CALSET/CALF` for all required points
6. `CALCHK\r`
7. `CALDATE,...\r`
8. `CALOFF\r`

## Confidence

- Presence of hidden calibration command family: **high**
- Existence of dedicated autocal engine/functions: **high**
- Exact argument schema for `CALSET`/`CALF`: **medium-low**
- Single guaranteed end-to-end command script without factory app: **medium-low**

## Practical Implication for Qt App

A robust first Qt tool should:
- Provide manual command send/receive console with logging,
- Offer preset sequence steps (editable),
- Gate risky steps with confirmations,
- Parse and display known responses (`CALCHK`, `CALDATE?`, error strings),
- Preserve full transcript for iterative refinement.

