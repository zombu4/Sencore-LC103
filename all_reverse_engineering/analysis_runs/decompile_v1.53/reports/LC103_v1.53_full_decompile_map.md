# LC103 v1.53 Firmware Full Decompile and Map

## Input
- Firmware: `/Users/<user>/LC103/Sencore_LC103_FW_v1.53.BIN`
- Size: `131072` bytes (`0x20000`)
- SHA-256: `a76c27fd38aa190e4e4f03fedf5a8a57484d542521e18181ffe15606fb5079e0`

## Architecture and Layout
- Architecture identified: `8051` family (`LJMP` at reset vector, 8051 opcode profile, `MOVX` heavy external memory usage).
- Image split for complete coverage:
  - Bank 0: `0x00000-0x0FFFF` (`half0.bin`)
  - Bank 1: `0x10000-0x1FFFF` (`half1.bin`)
- Reason for split: standard `8051:BE:16` CODE space is 64KB; full file is 128KB.

## Bank Similarity
- Different bytes across the two 64KB banks: `43128` (65.81%).
- Identical bytes: `22408` (34.19%).
- Diff regions: `802` contiguous regions.
- Common discovered function entry points: `148`.
- Bank0-only discovered function entries: `164`.
- Bank1-only discovered function entries: `93`.

## Interrupt/Vector Mapping
### bank0_boot
- `CODE:0000` -> `LJMP 0x37f9` (UNCONDITIONAL_JUMP)
- `CODE:0003` -> `MOV R7 | A` (FALL_THROUGH)
- `CODE:000b` -> `LJMP 0x24dd` (UNCONDITIONAL_JUMP)
- `CODE:0013` -> `LJMP 0x2619` (UNCONDITIONAL_JUMP)
- `CODE:001b` -> `MOV R7 | A` (FALL_THROUGH)
- `CODE:0023` -> `LJMP 0x26de` (UNCONDITIONAL_JUMP)
- `CODE:002b` -> `CLR A` (FALL_THROUGH)
- `CODE:0033` -> `MOVX @DPTR | A` (FALL_THROUGH)
- `CODE:0043` -> `MOV R7 | #0xb` (FALL_THROUGH)

### bank1_boot
- `CODE:0000` -> `LJMP 0x37f9` (UNCONDITIONAL_JUMP)
- `CODE:0003` -> `NOP ` (FALL_THROUGH)
- `CODE:000b` -> `LJMP 0x24dd` (UNCONDITIONAL_JUMP)
- `CODE:0013` -> `LJMP 0x2619` (UNCONDITIONAL_JUMP)
- `CODE:001b` -> `AJMP 0x0074` (UNCONDITIONAL_JUMP)
- `CODE:0023` -> `LJMP 0x26de` (UNCONDITIONAL_JUMP)
- `CODE:002b` -> `CLR A` (FALL_THROUGH)
- `CODE:0033` -> `MOVX @DPTR | A` (FALL_THROUGH)
- `CODE:0043` -> `MOV R7 | #0xb` (FALL_THROUGH)

## Code Surface Summary
### bank0_boot
- Functions: `312`
- Instructions: `3382`
- Call edges: `231`
- MOVX instructions (external bus/data): `505`
- Strings recognized by Ghidra: `115`
- Top function bodies by instruction count:
  - `CODE:a95a` `FUN_CODE_a95a` (103 insns, 152 bytes)
  - `CODE:3b8f` `FUN_CODE_3b8f` (75 insns, 94 bytes)
  - `CODE:292a` `FUN_CODE_292a` (74 insns, 104 bytes)
  - `CODE:1bf0` `FUN_CODE_1bf0` (64 insns, 121 bytes)
  - `CODE:2ba8` `FUN_CODE_2ba8` (64 insns, 108 bytes)
  - `CODE:299d` `FUN_CODE_299d` (61 insns, 87 bytes)
  - `CODE:aa00` `FUN_CODE_aa00` (59 insns, 90 bytes)
  - `CODE:aa5b` `FUN_CODE_aa5b` (55 insns, 84 bytes)
  - `CODE:ab0a` `FUN_CODE_ab0a` (54 insns, 78 bytes)
  - `CODE:ac71` `FUN_CODE_ac71` (54 insns, 89 bytes)
- Top call targets:
  - `CODE:3ca6` (15 calls)
  - `CODE:4456` (12 calls)
  - `CODE:444a` (9 calls)
  - `CODE:2a0a` (8 calls)
  - `CODE:aab4` (8 calls)
  - `CODE:1f64` (7 calls)
  - `CODE:389d` (7 calls)
  - `CODE:3c0d` (7 calls)
  - `CODE:ac5e` (7 calls)
  - `CODE:38c6` (6 calls)
- Top DPTR immediate addresses (hardware/state hotspots):
  - `0x804f` (14)
  - `0x7d01` (10)
  - `0x8038` (10)
  - `0x8ae0` (10)
  - `0x8035` (9)
  - `0x7b00` (9)
  - `0x8105` (8)
  - `0x8108` (7)
  - `0x81bc` (7)
  - `0x80c9` (7)
  - `0x8048` (7)
  - `0x81c0` (5)

### bank1_boot
- Functions: `241`
- Instructions: `2594`
- Call edges: `189`
- MOVX instructions (external bus/data): `478`
- Strings recognized by Ghidra: `115`
- Top function bodies by instruction count:
  - `CODE:292a` `FUN_CODE_292a` (74 insns, 104 bytes)
  - `CODE:1bf0` `FUN_CODE_1bf0` (64 insns, 121 bytes)
  - `CODE:24f0` `FUN_CODE_24f0` (63 insns, 90 bytes)
  - `CODE:299d` `FUN_CODE_299d` (61 insns, 87 bytes)
  - `CODE:2c27` `FUN_CODE_2c27` (47 insns, 74 bytes)
  - `CODE:51b4` `FUN_CODE_51b4` (44 insns, 79 bytes)
  - `CODE:ef5c` `FUN_CODE_ef5c` (42 insns, 72 bytes)
  - `CODE:52a2` `FUN_CODE_52a2` (41 insns, 74 bytes)
  - `CODE:59be` `FUN_CODE_59be` (38 insns, 63 bytes)
  - `CODE:2735` `FUN_CODE_2735` (36 insns, 61 bytes)
- Top call targets:
  - `CODE:40f6` (11 calls)
  - `CODE:4456` (9 calls)
  - `CODE:1f64` (8 calls)
  - `CODE:389d` (8 calls)
  - `CODE:43e8` (7 calls)
  - `CODE:420f` (7 calls)
  - `CODE:4225` (7 calls)
  - `CODE:2905` (6 calls)
  - `CODE:f011` (6 calls)
  - `CODE:27f5` (5 calls)
- Top DPTR immediate addresses (hardware/state hotspots):
  - `0x804f` (14)
  - `0x81bc` (13)
  - `0x8b39` (11)
  - `0x7d01` (10)
  - `0x8b3c` (9)
  - `0x8ae2` (8)
  - `0x8105` (8)
  - `0x8054` (7)
  - `0x7d02` (7)
  - `0x8149` (7)
  - `0x8b41` (7)
  - `0x8035` (6)

## Functional Strings Map (high-confidence features)
- Boot/UI identity: `LC103 SOFTWARE`, `VERSION 1.53`, `LC103 ReZolver`.
- Calibration and service commands: `CALON`, `CALOFF`, `CALSET`, `CALCLR`, `CALF`, `CALCHK`, `CALDATE`, `SER#`, `BEEP`, `GAIN`, `ISRC`.
- Component classes: `Alum Lytic`, `Dbl Lytic`, `Tantalum`, `Ceramic`, `Coils`, `Yokes & FB`, `Sw Xformer`.
- Measurement/error flow: multiple operator messages (`LOW BATTERY`, `LEAD ZERO SHORT`, `CAP TOO LARGE`, `INVALID RS232 COMMAND`, `ERROR 1..8`).

## Decompiled Control-Flow Highlights
- `FUN_CODE_37f9`: startup clear-RAM loop, stack init (`SP=0x28`), then platform init call (`FUN_CODE_3840`).
- `FUN_CODE_24dd` / `FUN_CODE_24f0`: timer reload path (`TH0/TL0`), repeated calculations on EXTMEM state (`0x81bc+`/`0x81c0+`), error/failout paths through `FUN_CODE_4456`.
- `FUN_CODE_2619`: mode/state branch logic keyed by `DAT_EXTMEM_8108/8109`, with register bit-masking writes to `0x804d/0x804f/0x8054/0x805f/0x8069`.
- `FUN_CODE_1bf0`: global hardware state normalization/masking routine touching `0x8035..0x8067`, then invokes `FUN_CODE_3939`, `FUN_CODE_151d`, and terminal call to `FUN_CODE_4456`.
- `FUN_CODE_292a`: arithmetic/compare-heavy routine involving timer/status bytes and serial flags (`TI/RI`) with output via `FUN_CODE_29fd`.
- `FUN_CODE_ef5c` (bank1): staged routine writing `0x8ae2..0x8ae4`, repeated `FUN_CODE_f011` sequencing, then polling `FUN_CODE_40f6` and looping until condition clears.

## Artifacts Generated
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_boot_functions.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_boot_functions.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_boot_function_calls.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_boot_function_calls.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_boot_instructions.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_boot_instructions.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_boot_references.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_boot_references.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_boot_strings.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_boot_strings.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_boot_disasm.asm`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_boot_disasm.asm`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_boot_vectors.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_boot_vectors.csv`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/lc103_full_map_summary.json`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank0_selected_decomp.txt`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/bank1_selected_decomp.txt`
- `/Users/<user>/LC103/decompile_v1.53/artifacts/strings_offsets_hex.txt`
